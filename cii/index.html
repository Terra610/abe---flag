<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>CII ‚Äî Community Investment Interface | A.B.E.</title>
  <base href="/abe---flag/">
  <link rel="stylesheet" href="../abe-patch/assets/abe-patch.css"/>
  <style>
    .cii-wrap{
      max-width:1100px;
      margin:0 auto;
      padding:1.5rem 1rem 3rem;
    }
    .cii-header h1{
      margin:0 0 .25rem;
      font-size:1.9rem;
    }
    .cii-header .tagline{
      max-width:780px;
      color:var(--muted);
      font-size:.98rem;
    }
    .cii-grid{
      display:grid;
      gap:1.1rem;
    }
    @media(min-width:900px){
      .cii-grid{
        grid-template-columns:1.4fr 1.6fr;
      }
    }
    .cii-card{
      background:var(--panel);
      border-radius:14px;
      border:1px solid var(--line);
      padding:1rem 1.1rem 1.2rem;
      box-shadow:0 18px 40px rgba(0,0,0,.45);
      min-height:0;
    }
    .cii-card h2{
      margin:.1rem 0 .4rem;
      font-size:1.15rem;
    }
    .cii-card h3{
      margin:.35rem 0 .3rem;
      font-size:1rem;
    }
    .cii-sub{
      color:var(--muted);
      font-size:.9rem;
    }
    .cii-mini{
      font-size:.82rem;
      color:var(--muted);
      margin-top:.3rem;
    }
    .cii-status{
      margin-top:.6rem;
      font-size:.84rem;
      color:var(--muted);
    }
    .cii-status-ok{color:#4bd28f;}
    .cii-status-warn{color:#ffba5c;}
    .cii-status-bad{color:#ff8585;}
    table{
      width:100%;
      border-collapse:collapse;
      font-size:.82rem;
      margin-top:.4rem;
    }
    th,td{
      border:1px solid var(--line);
      padding:.3rem .35rem;
    }
    th{
      background:#090d18;
      text-align:left;
    }
    input[type="text"],
    input[type="number"]{
      width:100%;
      background:#050712;
      border-radius:7px;
      border:1px solid var(--line);
      padding:.3rem .35rem;
      color:var(--ink);
      font-size:.8rem;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      margin-top:.8rem;
      padding:.45rem 1.05rem;
      border-radius:999px;
      border:1px solid var(--accent);
      background:#050712;
      color:var(--ink);
      font-size:.9rem;
      cursor:pointer;
      gap:.4rem;
    }
    .btn:hover{
      box-shadow:0 0 0 1px rgba(93,223,255,.36),0 0 18px rgba(93,223,255,.25);
    }
    .btn-ghost{
      border-color:var(--line);
      margin-left:.3rem;
    }
    .btn-ghost:hover{
      box-shadow:none;
      background:#080b15;
    }
    .btn:disabled{
      opacity:.55;
      cursor:default;
      box-shadow:none;
    }
    pre{
      margin:.45rem 0 .7rem;
      background:#050712;
      border-radius:10px;
      border:1px solid var(--line);
      padding:.6rem .7rem;
      font-family:ui-monospace,SFMono-Regular,Consolas,monospace;
      font-size:.82rem;
      max-height:260px;
      overflow:auto;
      white-space:pre-wrap;
      color:var(--ink);
    }
  </style>
</head>
<body class="abe-page">

<header class="abe-header">
  <div class="cii-wrap cii-header">
    <a href="/abe---flag/index.html" class="chip">‚Üê A.B.E. Home</a>
    <h1>CII ‚Äî Community Investment Interface</h1>
    <p class="tagline">
      Convert CIBS budgets into real project portfolios ‚Äî housing units, clinic visits, transit passes,
      workforce seats, legal aid cases ‚Äî with clear per-project lines.
    </p>
    <nav class="chip-row">
      <a class="chip" href="../ciri/index.html">CIRI</a>
      <a class="chip" href="../cibs/index.html">CIBS</a>
      <span class="chip chip-alt">CII</span>
      <a class="chip" href="../macro/index.html">Macro</a>
      <a class="chip" href="../integration/index.html">Integration</a>
    </nav>
  </div>
</header>

<main class="abe-main">
  <div class="cii-wrap cii-grid">

    <!-- LEFT: load budget + define simple unit costs -->
    <section class="cii-card">
      <h2>Step 1 ‚Äî Load budget & unit assumptions</h2>
      <p class="cii-sub">
        CII looks for <code>ABE_CIBS_BUDGET_V1</code> from this browser. Each category can then be translated
        into units (e.g., housing months, clinic visits, passes, seats).
      </p>

      <p id="cii-bridge" class="cii-mini">
        CIBS bridge: looking for ABE_CIBS_BUDGET_V1‚Ä¶
      </p>

      <h3>1.1 ¬∑ Per-category unit costs (rough, public-facing)</h3>
      <p class="cii-mini">
        These are simple, transparent conversion factors. They do not need to be perfect ‚Äî they show scale.
      </p>

      <div id="cii-units-area">
        <!-- per-category inputs rendered by JS -->
      </div>

      <button id="cii-recalc" class="btn">
        <span>üìä Recalculate project portfolio</span>
      </button>
      <div id="cii-status" class="cii-status">Status: waiting for CIBS budget‚Ä¶</div>
    </section>

    <!-- RIGHT: portfolio table + receipts -->
    <section class="cii-card">
      <h2>Step 2 ‚Äî Portfolio & receipts</h2>

      <h3>2.1 ¬∑ Portfolio preview</h3>
      <div id="cii-table-wrap">
        <!-- table injected here -->
      </div>

      <h3>2.2 ¬∑ Scenario JSON</h3>
      <pre id="cii-json">{}</pre>

      <button id="cii-download-csv" class="btn" disabled>
        ‚¨á Download cii_portfolio.csv
      </button>
      <button id="cii-download-json" class="btn btn-ghost" disabled>
        ‚¨á Download cii_portfolio.json
      </button>

      <p id="cii-hash" class="cii-mini">
        Audit hash: ‚Äî  
        (SHA-256 of this CII portfolio. Any tampering will change this value.)
      </p>

      <p class="cii-mini">
        This portfolio is suitable for city halls, councils, community boards, and oversight bodies.
        Integration will include its hash in the A.B.E. audit trail.
      </p>
    </section>

  </div>
</main>

<footer class="abe-footer">
  <p>
    CC BY-NC 4.0 ¬∑ DOI <a href="https://doi.org/10.5281/zenodo.17586107">10.5281/zenodo.17586107</a> ¬∑ Integrity only ‚Äî never for sale.
  </p>
</footer>

<script src="local.js"></script>
</body>
</html>
