{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ABE_MacroCascadeScenario_v1",
  "description": "Schema for a Macroeconomic Cascade scenario derived from a single restored community model and a chosen number of communities.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "version",
    "module",
    "communities",
    "per_community",
    "scenario_total"
  ],
  "properties": {
    "version": {
      "type": "string",
      "const": "1.0",
      "description": "Schema / artifact version."
    },
    "module": {
      "type": "string",
      "const": "MACRO",
      "description": "Module identifier for the macroeconomic cascade engine."
    },
    "label": {
      "type": "string",
      "description": "Optional human-readable label for this macro scenario (e.g., 'Iowa â€“ 100 communities')."
    },
    "communities": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of communities used in this scenario run."
    },
    "source_model_file": {
      "type": "string",
      "description": "Relative path to the JSON model used (e.g., 'macro/ABE_MacroCascadeModel.json')."
    },
    "source_ciri_scenario_id": {
      "type": "string",
      "description": "Optional identifier or hash of the CIRI scenario this macro run is based on (e.g., localStorage key, SHA-256, or user label)."
    },

    "per_community": {
      "type": "object",
      "description": "Metrics for a single restored community.",
      "additionalProperties": false,
      "required": [
        "direct_investment",
        "gdp_uplift",
        "wages_uplift",
        "local_spending_uplift",
        "annual_savings",
        "jobs",
        "citizens_low",
        "citizens_high"
      ],
      "properties": {
        "direct_investment": {
          "type": "number",
          "minimum": 0,
          "description": "Average direct investment per community (USD)."
        },
        "gdp_uplift": {
          "type": "number",
          "minimum": 0,
          "description": "Annual GDP uplift per community (USD)."
        },
        "wages_uplift": {
          "type": "number",
          "minimum": 0,
          "description": "Annual wages uplift per community (USD)."
        },
        "local_spending_uplift": {
          "type": "number",
          "minimum": 0,
          "description": "Annual local market spending uplift per community (USD)."
        },
        "annual_savings": {
          "type": "number",
          "minimum": 0,
          "description": "Annual cost savings per community (justice + health) in USD."
        },
        "jobs": {
          "type": "number",
          "minimum": 0,
          "description": "Jobs supported or created per community."
        },
        "citizens_low": {
          "type": "number",
          "minimum": 0,
          "description": "Lower bound estimate of citizens materially served in one community."
        },
        "citizens_high": {
          "type": "number",
          "minimum": 0,
          "description": "Upper bound estimate of citizens materially served in one community."
        }
      }
    },

    "scenario_total": {
      "type": "object",
      "description": "Metrics for the whole macro scenario (all communities combined).",
      "additionalProperties": false,
      "required": [
        "direct_investment",
        "gdp_uplift",
        "wages_uplift",
        "local_spending_uplift",
        "annual_savings",
        "jobs",
        "citizens_low",
        "citizens_high"
      ],
      "properties": {
        "direct_investment": {
          "type": "number",
          "minimum": 0,
          "description": "Total direct investment for all communities (USD)."
        },
        "gdp_uplift": {
          "type": "number",
          "minimum": 0,
          "description": "Total annual GDP uplift across all communities (USD)."
        },
        "wages_uplift": {
          "type": "number",
          "minimum": 0,
          "description": "Total annual wages uplift across all communities (USD)."
        },
        "local_spending_uplift": {
          "type": "number",
          "minimum": 0,
          "description": "Total annual local market spending uplift across all communities (USD)."
        },
        "annual_savings": {
          "type": "number",
          "minimum": 0,
          "description": "Total annual cost savings (justice + health) across all communities (USD)."
        },
        "jobs": {
          "type": "number",
          "minimum": 0,
          "description": "Total jobs supported or created across all communities."
        },
        "citizens_low": {
          "type": "number",
          "minimum": 0,
          "description": "Lower bound estimate of citizens materially served across all communities."
        },
        "citizens_high": {
          "type": "number",
          "minimum": 0,
          "description": "Upper bound estimate of citizens materially served across all communities."
        }
      }
    },

    "assumptions": {
      "type": "object",
      "description": "Key model assumptions used for this run.",
      "additionalProperties": false,
      "properties": {
        "avg_direct_investment": {
          "type": "number",
          "minimum": 0,
          "description": "Average direct investment per community used in calculations (USD)."
        },
        "gdp_multiplier": {
          "type": "number",
          "minimum": 0,
          "description": "Multiplier applied to direct investment to estimate GDP uplift."
        },
        "wage_multiplier": {
          "type": "number",
          "minimum": 0,
          "description": "Multiplier applied to direct investment to estimate wage uplift."
        },
        "local_spending_multiplier": {
          "type": "number",
          "minimum": 0,
          "description": "Multiplier applied to direct investment to estimate local market spending uplift."
        },
        "notes": {
          "type": "string",
          "description": "Freeform notes documenting any scenario-specific assumptions or caveats."
        }
      }
    }
  }
}
