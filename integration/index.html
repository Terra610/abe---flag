<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Integration Layer ‚Äî Verification & Evidence | A.B.E.</title>

  <!-- Optional site patch; safe if missing -->
  <link rel="stylesheet" href="/abe---flag/abe-patch/assets/abe-patch.css">

  <style>
    :root{
      --bg:#0b0d12; --panel:#13161b; --ink:#e0e0e0; --muted:#9aa3ad;
      --edge:rgba(255,255,255,.08); --edge2:rgba(255,255,255,.12);
      --accent:#5ddfff; --accent2:#ffa559;
    }
    *{box-sizing:border-box}
    body{background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.65;margin:0}

    header{
      background:linear-gradient(90deg,#11151c,#1b1e25);
      border-bottom:1px solid var(--edge);
      padding:2rem 1rem;
      text-align:center;
      position:relative
    }
    .home-btn{
      position:absolute;left:1rem;top:1.2rem;
      background:var(--accent);color:#0b0d12;
      padding:.45rem .9rem;border-radius:8px;font-weight:700;text-decoration:none;font-size:.9rem;
      transition:all .2s ease-in-out;border:1px solid transparent
    }
    .home-btn:hover{background:#82eaff;box-shadow:0 0 8px rgba(93,223,255,.7);transform:translateY(-2px)}
    h1{color:var(--accent);font-size:1.8rem;margin:.1rem 0 .4rem;font-weight:800}
    header p{margin:.25rem 0 0;color:var(--muted)}
    .top-actions{display:flex;gap:.6rem;flex-wrap:wrap;justify-content:center;margin:.9rem 0 0}
    .btn,.badge{display:inline-block;text-decoration:none;font-weight:700;border-radius:8px;transition:all .18s ease-in-out}
    .btn{background:var(--accent);color:#0b0d12;padding:.55rem 1rem;border:1px solid transparent}
    .btn:hover{background:#82eaff;transform:translateY(-2px);box-shadow:0 0 10px rgba(93,223,255,.6)}
    .badge{color:var(--accent);border:1px solid var(--accent);padding:.45rem .7rem;font-size:.9rem}
    .badge:hover{background:rgba(93,223,255,.08);transform:translateY(-2px)}

    main{max-width:1000px;margin:2rem auto 3.5rem;padding:0 1rem}
    section{
      background:rgba(255,255,255,.03);border:1px solid var(--edge);
      border-radius:12px;padding:1.2rem 1.4rem;margin-bottom:1.4rem;
      box-shadow:0 0 12px rgba(93,223,255,.05)
    }
    section:hover{box-shadow:0 0 16px rgba(93,223,255,.12)}
    h2{color:var(--accent2);font-size:1.2rem;margin:.2rem 0 .7rem}
    a{color:#80bfff} a:hover{text-decoration:underline}

    /* Cards / grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
    .card{background:#16181d;border:1px solid var(--edge2);border-radius:10px;padding:12px;box-shadow:0 0 10px rgba(93,223,255,.05)}
    .status{font-weight:800;margin-top:.35rem}
    .ok{color:#9ef59e}.warn{color:#ffd27d}.bad{color:#ff9d9d}
    .small{font-size:12px;color:#a7b4c8}
    .muted{color:var(--muted)}

    /* Evidence table */
    table.evt{width:100%;border-collapse:collapse;margin-top:.5rem}
    table.evt th,table.evt td{padding:8px;border-bottom:1px solid rgba(255,255,255,.08);text-align:left;vertical-align:top}
    code{background:rgba(255,255,255,.07);padding:.2rem .4rem;border-radius:4px;color:#f1fa8c;font-size:.9rem}

    /* Buttons */
    .btn-ghost{padding:6px 10px;border:1px solid #2a3344;border-radius:6px;background:#0d0f12;color:#eaeef7;cursor:pointer}
    .btn-ghost+ .btn-ghost{margin-left:8px}
    .btn-ghost:hover{border-color:var(--accent);color:var(--accent)}
  </style>
</head>
<body>

<header>
  <a class="home-btn" href="/abe---flag/index.html">‚Üê Return to Home</a>
  <h1>üîó Integration Layer ‚Äî Verification & Evidence</h1>
  <p>Programmatic checks that Recovery Pool funds and obligations align with the public record.</p>
  <div class="top-actions">
    <a class="btn" href="/abe---flag/doctrine/index.html">üìú Doctrine Library</a>
    <a class="badge" href="/abe---flag/system/index.html">üó∫ System Map</a>
    <a class="badge" href="/abe---flag/ciri/index.html">‚öô CIRI</a>
    <a class="badge" href="/abe---flag/cibs/index.html">üìä CIBS</a>
  </div>
</header>

<main>

  <section>
    <h2>‚úÖ Live Checks (placeholders)</h2>
    <div class="grid" role="list">
      <div class="card" role="listitem">
        <strong>Receipt verification</strong>
        <div id="chk-receipt" class="status ok">OK</div>
        <div class="small muted">Bank/treasury proofs match the System Map.</div>
      </div>
      <div class="card" role="listitem">
        <strong>Recipient match</strong>
        <div id="chk-recipient" class="status ok">OK</div>
        <div class="small muted">Disbursements align with <code>cibs/auto_budget.csv</code>.</div>
      </div>
      <div class="card" role="listitem">
        <strong>Retaliation / suppression</strong>
        <div id="chk-ret" class="status ok">OK</div>
        <div class="small muted">No negative flags detected in monitoring feeds.</div>
      </div>
      <div class="card" role="listitem">
        <strong>Public audit attestation</strong>
        <div id="chk-audit" class="status warn">Pending</div>
        <div class="small muted">Awaiting posted, signed attestations.</div>
      </div>
    </div>
    <p class="small">These are placeholders. Wire them to real endpoints as evidence is published.</p>
    <div style="margin-top:8px">
      <button id="btn-export" class="btn-ghost">Download Status JSON</button>
      <button id="btn-refresh" class="btn-ghost">Refresh</button>
    </div>
  </section>

  <section>
    <h2>üìë Evidence Index</h2>
    <table class="evt" aria-label="Evidence index">
      <thead><tr><th>Artifact</th><th>Location</th><th>Notes</th></tr></thead>
      <tbody>
        <tr>
          <td>System Map</td>
          <td><a href="/abe---flag/system/index.html">/system/index.html</a></td>
          <td class="small">Public chain-of-custody viewer; expects <code>/system/map.json</code>.</td>
        </tr>
        <tr>
          <td>Auto Budget (CIBS)</td>
          <td><a href="/abe---flag/cibs/auto_budget.csv">/cibs/auto_budget.csv</a></td>
          <td class="small">Generated allocations from CIRI‚Äôs Recovery Pool.</td>
        </tr>
        <tr>
          <td>CIRI Calculator</td>
          <td><a href="/abe---flag/ciri/index.html">/ciri/index.html</a></td>
          <td class="small">Instructions + example <code>inputs.csv</code>; runs locally.</td>
        </tr>
        <tr>
          <td>Doctrine</td>
          <td><a href="/abe---flag/doctrine/index.html">/doctrine/index.html</a></td>
          <td class="small">ABE ¬∑ Constitutional Fidelity ¬∑ Void ab Initio.</td>
        </tr>
      </tbody>
    </table>
  </section>

</main>

<!-- Optional patch scripts -->
<script src="/abe---flag/abe-patch/assets/abe-nav.js"></script>
<script src="/abe---flag/abe-patch/assets/abe-definitions.js"></script>

<script>
(function(){
  // Minimal interactivity to match the rest of the site
  const btnRefresh = document.getElementById('btn-refresh');
  const btnExport  = document.getElementById('btn-export');

  function currentStatuses(){
    return {
      generated: new Date().toISOString(),
      checks: {
        receipt:   document.getElementById('chk-receipt')?.textContent.trim(),
        recipient: document.getElementById('chk-recipient')?.textContent.trim(),
        retaliation: document.getElementById('chk-ret')?.textContent.trim(),
        audit:     document.getElementById('chk-audit')?.textContent.trim()
      }
    };
  }

  btnRefresh?.addEventListener('click', () => {
    // Placeholder: if you fetch real endpoints later, trigger them here.
    const cards = document.querySelectorAll('.status');
    cards.forEach(el => el.classList.add('pulse'));
    setTimeout(() => cards.forEach(el => el.classList.remove('pulse')), 400);
  });

  btnExport?.addEventListener('click', () => {
    const snapshot = currentStatuses();
    const blob = new Blob([JSON.stringify(snapshot, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'integration_status_snapshot.json'; a.click();
    URL.revokeObjectURL(url);
  });
})();
</script>

</body>
</html>
