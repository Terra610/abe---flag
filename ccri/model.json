{
  "version": "1.0",
  "module": "CCRI",
  "name": "Consumer Credit Risk Integrity",
  "description": "Evaluates how consumer credit and auto lending systems use DMV / DOT data and license status, and how that impacts lawful access to credit and mobility.",
  "inputs": {
    "file": "ccri/inputs.json",
    "schema": "ccri/schema.json",
    "entity": "scenario",
    "id_field": "id"
  },
  "metrics": [
    {
      "key": "dmv_gate_rate",
      "label": "DMV-gated applicants (share)",
      "description": "Share of applicants whose approval depends on DMV / license status rules.",
      "formula": "denial_rate_for_suspended_or_no_license || 0",
      "source_fields": [
        "population_impact.denial_rate_for_suspended_or_no_license"
      ]
    },
    {
      "key": "noncommercial_affected",
      "label": "Noncommercial applicants affected",
      "description": "Estimated count of noncommercial applicants impacted by DMV-based gates.",
      "formula": "estimated_noncommercial_applicants_affected || 0",
      "source_fields": [
        "population_impact.estimated_noncommercial_applicants_affected"
      ]
    },
    {
      "key": "dot_misuse_flag",
      "label": "DOT / FMCSA misuse flag",
      "description": "Flags scenarios where DOT / FMCSA-style enforcement data touches non–DOT-regulated populations.",
      "formula": "(!dot_or_fmcsa_usage_details.is_dot_regulated_population && (data_sources_used.dmv_records || data_sources_used.dot_or_fmcsa_records)) ? 1 : 0",
      "source_fields": [
        "dot_or_fmcsa_usage_details.is_dot_regulated_population",
        "data_sources_used.dmv_records",
        "data_sources_used.dot_or_fmcsa_records"
      ]
    },
    {
      "key": "appeal_barrier_flag",
      "label": "No appeal / human review flag",
      "description": "Flags systems where algorithmic denials based on DMV or license data cannot be meaningfully challenged.",
      "formula": "(appeal_process.has_appeal_mechanism === false || appeal_process.human_review_available === false) ? 1 : 0",
      "source_fields": [
        "appeal_process.has_appeal_mechanism",
        "appeal_process.human_review_available"
      ]
    }
  ],
  "kpis": [
    {
      "key": "ccri_system_integrity_index",
      "label": "CCRI System Integrity Index",
      "description": "High-level 0–1 signal where 1.0 indicates credit / mobility decisions are independent of DMV / DOT overreach and include appeal safeguards.",
      "range": [0, 1],
      "note": "Implementation detail: combine dmv_gate_rate, dot_misuse_flag, and appeal_barrier_flag into a normalized index."
    }
  ],
  "downstream_links": [
    {
      "target": "ciri",
      "purpose": "Convert CCRI divergence and population counts into recoverable economic value (mobility, work access, household income)."
    },
    {
      "target": "cff",
      "purpose": "Quantify financial and legal exposure where unlawful DMV / DOT signals are embedded in underwriting models."
    },
    {
      "target": "cibs",
      "purpose": "Translate CCRI corrections into budget categories (mobility, credit access, workforce) for reinvestment."
    },
    {
      "target": "affe",
      "purpose": "Model long-term stability, default reductions, and community recovery once credit rules are realigned."
    }
  ]
}
